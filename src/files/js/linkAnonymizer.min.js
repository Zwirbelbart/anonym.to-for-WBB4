function anonymizeLink(n){$(n).attr("href",service.anonymize($(n).attr("href")));$(n).attr("data-anonymized","true")}function process(){$("a:not([data-external-link])").each(function(){var n=$(this),i,t;$(".redactor-box").has(n).length<1&&(i=n.attr("href"),t=n.attr("data-anonymized"),isExternalAddress(i)&&(typeof t=="undefined"||t!="true")&&n.attr("data-external-link","true"))});$("a[data-external-link]").each(function(){var n=$(this).attr("data-anonymized");(typeof n=="undefined"||n!="true")&&anonymizeLink(this)})}function isExternalAddress(n){return typeof n=="undefined"||$.inArray(n,whitelistedLinks)>-1?!1:!(n.substring(0,4)==="http"?regExp.test(n):!0)}function throttle(n,t){clearTimeout(n._tId);n._tId=setTimeout(function(){n()},t)}var whitelistedLinks=["#"],services=[{displayName:"anonym.to",anonymize:function(n){return"http://anonym.to/?"+encodeURIComponent(n)}},{displayName:"dontknow.me",anonymize:function(n){return"http://dontknow.me/at/?"+encodeURIComponent(n)}},{displayName:"HideMyAss",anonymize:function(n){return document.location.protocol+"//hidemyass.com/?"+encodeURIComponent(n)}}],service,regExp=new RegExp("//"+location.host+"($|/)");document.addEventListener("DOMContentLoaded",function(){if(typeof linkAnonymizerService=="undefined"){console.error("linkAnonymizer: Unable to determine anonymizer service, aborting");return}if(service=services[linkAnonymizerService],typeof service=="undefined"){console.error("linkAnonymizer: Service not defined, aborting");return}$(document).ready(function(){process()});$("html").bind("DOMSubtreeModified",function(){throttle(process,500)})})